<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Qing-Digital-Self</title>
    <meta name="description" content="清凤的数字分身,并且包含了搭建教程">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/Qing-Digital-Self/assets/style.saCJ7iHT.css" as="style">
    <link rel="preload stylesheet" href="/Qing-Digital-Self/vp-icons.css" as="style">
    
    <script type="module" src="/Qing-Digital-Self/assets/app.D1rCpgyH.js"></script>
    <link rel="preload" href="/Qing-Digital-Self/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Qing-Digital-Self/assets/chunks/theme.CB5kl2g0.js">
    <link rel="modulepreload" href="/Qing-Digital-Self/assets/chunks/framework.DUP9kEI5.js">
    <link rel="modulepreload" href="/Qing-Digital-Self/assets/guide_prepare-data.md.C7d9gmOG.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/Qing-Digital-Self/" data-v-9f43907a><!--[--><!--]--><!----><span data-v-9f43907a>Qing-Digital-Self</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Qing-Digital-Self/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>开始</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Qing-Digital-Self/guide/index.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>快速上手</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-9fd4d1dd data-v-acee064b data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-bfe7971f><span class="text" data-v-bfe7971f><span class="vpi-languages option-icon" data-v-bfe7971f></span><!----><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><div class="items" data-v-acee064b><p class="title" data-v-acee064b>中文</p><!--[--><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/Qing-Digital-Self/en/guide/prepare-data.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/qqqqqf-q/Qing-Digital-Self" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https.x.com/qqqqqf5" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 7.184L18.901 1.153Zm-1.653 19.57h2.608L6.852 3.24H4.21l13.038 17.484Z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><div class="group translations" data-v-f953d92f><p class="trans-title" data-v-f953d92f>中文</p><!--[--><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/Qing-Digital-Self/en/guide/prepare-data.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/qqqqqf-q/Qing-Digital-Self" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https.x.com/qqqqqf5" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 7.184L18.901 1.153Zm-1.653 19.57h2.608L6.852 3.24H4.21l13.038 17.484Z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>开始</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/index.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>简介</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 has-active" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>快速上手</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/prepare-data.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>1. QQ/TG/WX其他数据的获取</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/clean-data.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>2. 清洗数据</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/mix-data.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>3. (可选) 混合数据</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/prepare-model.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>4. 准备模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/fine-tune-model.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>5. 微调模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/run-full-model.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>6. (建议跳过)微调后直接运行全量模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/convert-model.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>7. 转换GUFF和量化模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/run-model.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>8. 运行模型</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>补充</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/change-logger-language.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>修改Logger的语言</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/fine-tune-model-exp.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>不同种类模型的微调经验(例如Qwen,Llama,Gemma等)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/save-vram.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>节省显存</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>总结</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Qing-Digital-Self/guide/summary.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>9. 总结</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _Qing-Digital-Self_guide_prepare-data" data-v-e6f2a212><div><h2 id="获取-qq-聊天数据" tabindex="-1">获取 QQ 聊天数据 <a class="header-anchor" href="#获取-qq-聊天数据" aria-label="Permalink to &quot;获取 QQ 聊天数据&quot;">​</a></h2><ul><li>教程请参考：<a href="https://qq.sbcnm.top/decrypt/NTQQ%20%28Windows%29.html" target="_blank" rel="noreferrer">NTQQ Windows 数据解密</a></li><li>补充资料：<a href="https://qq.sbcnm.top/decrypt/decode_db.html" target="_blank" rel="noreferrer">数据库解码参考</a></li><li>上面这两个是同一个教程的不同章节,耐心看完就好,不复杂(如果不会可以翻到最底下找我哦)</li><li>使用 DB Browser for SQLite，密码填写你获取到的 16 位密钥</li><li>HMAC 算法一般为SHA1，也有人是SHA512和256,自行测试,算法错误了会打不开数据库（所以需要测试到打开为之,也可以用 AI 帮你适配）</li><li>在 DB Browser 里<strong>导出 <code>c2c_msg_table</code> 的 SQL</strong></li><li>新建数据库，<strong>导入刚才导出的 SQL 文件</strong></li><li>获得一个这样的数据库</li><li>结构如下图,是明文数据库(你能打开并且能看到数据就是正常的)</li><li>将数据库重命名为 <code>qq.db</code>并放在<code>dataset/original</code>文件夹下</li></ul><blockquote><p>或修改<code>setting.jsonc</code>中的<code>qq_db_path</code></p></blockquote><ul><li><img src="https://cdn.nodeimage.com/i/oBfbWfVLhJI0CeZHTwwxq6G7XGO40Vy4.webp" alt="数据库图片"></li></ul><hr><h2 id="获取telegram-tg-聊天数据" tabindex="-1">获取Telegram(TG)聊天数据 <a class="header-anchor" href="#获取telegram-tg-聊天数据" aria-label="Permalink to &quot;获取Telegram(TG)聊天数据&quot;">​</a></h2><ul><li><p>请使用<a href="https://desktop.telegram.org/" target="_blank" rel="noreferrer">Telegram Desktop</a>导出聊天数据</p></li><li><p>点击<code>Export chat history</code>按钮 <img src="https://cdn.nodeimage.com/i/8PmL1yOyWbk1tTUkoLSk14sqrXN1HhYS.png" alt="8PmL1yOyWbk1tTUkoLSk14sqrXN1HhYS.png"></p></li><li><p>选择<code>JSON(Machine-readable JSON)</code>按钮</p></li><li><p>不必勾选其他按钮,因为此项目暂不支持多模态 <img src="https://cdn.nodeimage.com/i/ZOx12BovPbYXo89k4xIF9yRlEamneq4g.png" alt="ZOx12BovPbYXo89k4xIF9yRlEamneq4g.png"></p></li><li><p>将<code>导出文件夹下的**ChatExport_**文件夹全部移至</code>dataset/original/`文件夹内,如下图所示 <img src="https://cdn.nodeimage.com/i/zbc3iDHiqJrIOtWwrHkzX7TMONYatB8G.png" alt="zbc3iDHiqJrIOtWwrHkzX7TMONYatB8G"></p></li><li><p><strong>重要</strong></p></li><li><p>修改<code>setting.jsonc</code>文件,将<code>telegram_chat_id</code>改为你的telegram聊天id</p></li></ul><blockquote><p><strong>包含空格!!!</strong></p></blockquote><ul><li>比如以下ID需要填写的是<code>qqqqq f</code></li></ul><h2 id="获取微信-wx-聊天数据" tabindex="-1">获取微信(WX)聊天数据 <a class="header-anchor" href="#获取微信-wx-聊天数据" aria-label="Permalink to &quot;获取微信(WX)聊天数据&quot;">​</a></h2><ul><li><p>前往<a href="https://github.com/SuxueCode/WechatBakTool" target="_blank" rel="noreferrer">WeChatBakTool的Github项目</a>并且去release下载最新版</p></li><li><p>或点此下载<a href="https://github.com/SuxueCode/WechatBakTool/releases/download/v0.9.7.6/WechatBakTool.zip" target="_blank" rel="noreferrer">WechatBakTool</a></p></li><li><p>前往<a href="https://github.com/tom-snow/wechat-windows-versions/releases" target="_blank" rel="noreferrer">此项目</a>下载老版本微信(v3.9.12.15)</p></li><li><p>或点此链接快速下载<a href="https://github.com/tom-snow/wechat-windows-versions/releases/download/v3.9.12.15/WeChatSetup-3.9.12.15.exe" target="_blank" rel="noreferrer">微信</a></p></li><li><p>安装微信并登录</p></li><li><p>手机打开<code>设置-聊天-聊天记录迁移与备份-迁移-迁移至电脑微信</code>并继续</p></li><li><p>解压baktool</p></li><li><p>0.安装.NET Desktop Runtime(注意是6.0版本的Desktop Runtime，如已经安装忽略)</p></li><li><p>1.打开微信，并登录。</p></li><li><p>2.在软件左侧下方点击新建工作区，</p></li><li><p>3.在新建工作区界面，选择要创建工作区的微信进程，并确认下方微信号是否正确</p></li><li><p>4.解密方式推荐选择用户名推断查找！该方式理论支持所有64位版本微信。但该模式需要确保微信账号正确</p></li><li><p>5.新手请忽略其他选项，直接点击创建工作区，程序会自动进行工作区创建、解密。</p></li><li><p>右键<code>工作区</code>-<code>管理</code>,导出好友聊天,全部</p></li><li><p>将前往<code>baktool</code>的文件夹,进入<code>workspace-[随机名文件夹]-DecDB</code></p></li><li><p>找到所有<code>MSG*.db</code>的文件,例如<code>MSG1.db</code>,全部移动至<code>dataset/original/wechat</code>文件夹内 <img src="https://cdn.nodeimage.com/i/TRbknJP4C4KkBsfTKBUN3CXJPPVagMaP.png" alt="TRbknJP4C4KkBsfTKBUN3CXJPPVagMaP"></p></li></ul><h2 id="可选-从视频-音频文件中获取聊天数据" tabindex="-1">(可选) 从视频/音频文件中获取聊天数据&#39; <a class="header-anchor" href="#可选-从视频-音频文件中获取聊天数据" aria-label="Permalink to &quot;(可选) 从视频/音频文件中获取聊天数据&#39;&quot;">​</a></h2><ul><li>从双音轨的视频/音频中提取(需要有音轨分离的文件)</li></ul><h3 id="_1-安装依赖" tabindex="-1">1. 安装依赖 <a class="header-anchor" href="#_1-安装依赖" aria-label="Permalink to &quot;1. 安装依赖&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自动安装所有依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> process_data/chat_parser/video-to-chatml/start-vtc.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或手动安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requirements.txt</span></span></code></pre></div><p><strong>注意</strong>: 还需要安装ffmpeg:</p><ul><li>Windows: 从 <a href="https://ffmpeg.org" target="_blank" rel="noreferrer">https://ffmpeg.org</a> 下载或使用 <code>choco install ffmpeg</code></li><li>Ubuntu: <code>sudo apt install ffmpeg</code></li><li>macOS: <code>brew install ffmpeg</code></li></ul><h3 id="_2-使用方法" tabindex="-1">2. 使用方法 <a class="header-anchor" href="#_2-使用方法" aria-label="Permalink to &quot;2. 使用方法&quot;">​</a></h3><h4 id="交互式模式-推荐新用户" tabindex="-1">交互式模式（推荐新用户） <a class="header-anchor" href="#交互式模式-推荐新用户" aria-label="Permalink to &quot;交互式模式（推荐新用户）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> process_data/chat_parser/video-to-chatml/start-vtc.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span></span></code></pre></div><h4 id="直接命令行模式" tabindex="-1">直接命令行模式 <a class="header-anchor" href="#直接命令行模式" aria-label="Permalink to &quot;直接命令行模式&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> process_data/chat_parser/video-to-chatml/start-vtc.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> video.mp4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> output.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> base</span></span></code></pre></div><h4 id="使用主程序" tabindex="-1">使用主程序 <a class="header-anchor" href="#使用主程序" aria-label="Permalink to &quot;使用主程序&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> process_data/chat_parser/video-to-chatml/video-to-chatml.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> video.mp4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> output.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> base</span></span></code></pre></div><h3 id="参数说明" tabindex="-1">参数说明 <a class="header-anchor" href="#参数说明" aria-label="Permalink to &quot;参数说明&quot;">​</a></h3><ul><li><code>video</code>: 输入视频文件路径</li><li><code>-u, --user-track</code>: 用户音轨索引（默认: 0）</li><li><code>-a, --assistant-track</code>: 助手音轨索引（默认: 1）</li><li><code>-o, --output</code>: 输出的ChatML文件路径</li><li><code>-m, --model</code>: Whisper模型大小（tiny/base/small/medium/large，默认: base）</li></ul><h3 id="whisper模型选择" tabindex="-1">Whisper模型选择 <a class="header-anchor" href="#whisper模型选择" aria-label="Permalink to &quot;Whisper模型选择&quot;">​</a></h3><table tabindex="0"><thead><tr><th>模型</th><th>参数量</th><th>内存占用</th><th>速度</th><th>精度</th></tr></thead><tbody><tr><td>tiny</td><td>39M</td><td>~1GB</td><td>最快</td><td>最低</td></tr><tr><td>base</td><td>74M</td><td>~1GB</td><td>快</td><td>低</td></tr><tr><td>small</td><td>244M</td><td>~2GB</td><td>中等</td><td>中等</td></tr><tr><td>medium</td><td>769M</td><td>~5GB</td><td>慢</td><td>高</td></tr><tr><td>large</td><td>1550M</td><td>~10GB</td><td>最慢</td><td>最高</td></tr></tbody></table><h3 id="输出格式" tabindex="-1">输出格式 <a class="header-anchor" href="#输出格式" aria-label="Permalink to &quot;输出格式&quot;">​</a></h3><p>生成的ChatML文件格式如下：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;用户说的话&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;role&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;助手回复的话&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h3 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h3><h3 id="_1-cuda支持" tabindex="-1">1. CUDA支持 <a class="header-anchor" href="#_1-cuda支持" aria-label="Permalink to &quot;1. CUDA支持&quot;">​</a></h3><p>如果有NVIDIA GPU，程序会自动使用CUDA加速。检查CUDA支持：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> process_data/chat_parser/video-to-chatml/start-vtc.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --check</span></span></code></pre></div><h3 id="_2-音轨识别" tabindex="-1">2. 音轨识别 <a class="header-anchor" href="#_2-音轨识别" aria-label="Permalink to &quot;2. 音轨识别&quot;">​</a></h3><p>使用交互式模式可以查看视频的所有音轨信息，帮助选择正确的音轨索引。</p><h3 id="_3-内存不足" tabindex="-1">3. 内存不足 <a class="header-anchor" href="#_3-内存不足" aria-label="Permalink to &quot;3. 内存不足&quot;">​</a></h3><p>如果遇到内存不足，尝试使用更小的Whisper模型（如tiny或base）。</p><h3 id="依赖项" tabindex="-1">依赖项 <a class="header-anchor" href="#依赖项" aria-label="Permalink to &quot;依赖项&quot;">​</a></h3><ul><li>Python 3.7+</li><li>openai-whisper</li><li>torch</li><li>ffmpeg-python</li><li>ffmpeg (系统依赖)</li></ul><h3 id="支持的格式" tabindex="-1">支持的格式 <a class="header-anchor" href="#支持的格式" aria-label="Permalink to &quot;支持的格式&quot;">​</a></h3><p><strong>视频格式</strong>: MP4, MKV, AVI, MOV, WMV等ffmpeg支持的格式 <strong>音频编码</strong>: 大部分常见音频编码（AAC, MP3, WAV等）</p><h3 id="_2-todo-从单音轨的视频-音频中自动识别并提取-暂时没写" tabindex="-1">2.[TODO]从单音轨的视频/音频中自动识别并提取(暂时没写) <a class="header-anchor" href="#_2-todo-从单音轨的视频-音频中自动识别并提取-暂时没写" aria-label="Permalink to &quot;2.[TODO]从单音轨的视频/音频中自动识别并提取(暂时没写)&quot;">​</a></h3></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/Qing-Digital-Self/guide/index.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>简介</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/Qing-Digital-Self/guide/clean-data.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>2. 清洗数据</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"en_guide_change-logger-language.md\":\"V3sO9rI4\",\"en_guide_clean-data.md\":\"Bx8PWuvn\",\"en_guide_convert-model.md\":\"Ct8-b_O3\",\"en_guide_fine-tune-model-exp.md\":\"DJj3sgLC\",\"en_guide_fine-tune-model.md\":\"Q1pOqDtF\",\"en_guide_index.md\":\"09IUFwXB\",\"en_guide_media-chat-data.md\":\"8G-QBXri\",\"en_guide_mix-data.md\":\"--GkcxzO\",\"en_guide_prepare-data.md\":\"DiZvDIlX\",\"en_guide_prepare-model.md\":\"Bltb3cm9\",\"en_guide_run-full-model.md\":\"BSMoeFhI\",\"en_guide_run-model.md\":\"Bw-ni02b\",\"en_guide_save-vram.md\":\"CZln7i03\",\"en_guide_summary.md\":\"dRwu-xWw\",\"en_index.md\":\"C_vA3p6U\",\"guide_change-logger-language.md\":\"CpOF6gL7\",\"guide_clean-data.md\":\"DxBTT7_o\",\"guide_convert-model.md\":\"yD3VhmRz\",\"guide_fine-tune-model-exp.md\":\"BosNsuHj\",\"guide_fine-tune-model.md\":\"D5bg_Glq\",\"guide_index.md\":\"rYyXbAPJ\",\"guide_media-chat-data.md\":\"CbL7cPQu\",\"guide_mix-data.md\":\"CbQJ0N42\",\"guide_prepare-data.md\":\"C7d9gmOG\",\"guide_prepare-model.md\":\"DDeZJUf5\",\"guide_run-full-model.md\":\"BUFp91Z2\",\"guide_run-model.md\":\"PCe7hpah\",\"guide_save-vram.md\":\"CoXg1WGx\",\"guide_summary.md\":\"BcXDteQC\",\"index.md\":\"DPh3RsME\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/Qing-Digital-Self/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/qqqqqf-q/Qing-Digital-Self\"},{\"icon\":{\"svg\":\"<svg role=\\\"img\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><title>X</title><path d=\\\"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 7.184L18.901 1.153Zm-1.653 19.57h2.608L6.852 3.24H4.21l13.038 17.484Z\\\"/></svg>\"},\"link\":\"https.x.com/qqqqqf5\"}]},\"locales\":{\"root\":{\"label\":\"中文\",\"lang\":\"zh-CN\",\"title\":\"Qing-Digital-Self\",\"description\":\"清凤的数字分身,并且包含了搭建教程\",\"themeConfig\":{\"nav\":[{\"text\":\"开始\",\"link\":\"/\"},{\"text\":\"快速上手\",\"link\":\"/guide/index\"}],\"sidebar\":[{\"text\":\"开始\",\"items\":[{\"text\":\"简介\",\"link\":\"/guide/index\"}]},{\"text\":\"快速上手\",\"items\":[{\"text\":\"1. QQ/TG/WX其他数据的获取\",\"link\":\"/guide/prepare-data\"},{\"text\":\"2. 清洗数据\",\"link\":\"/guide/clean-data\"},{\"text\":\"3. (可选) 混合数据\",\"link\":\"/guide/mix-data\"},{\"text\":\"4. 准备模型\",\"link\":\"/guide/prepare-model\"},{\"text\":\"5. 微调模型\",\"link\":\"/guide/fine-tune-model\"},{\"text\":\"6. (建议跳过)微调后直接运行全量模型\",\"link\":\"/guide/run-full-model\"},{\"text\":\"7. 转换GUFF和量化模型\",\"link\":\"/guide/convert-model\"},{\"text\":\"8. 运行模型\",\"link\":\"/guide/run-model\"}]},{\"text\":\"补充\",\"items\":[{\"text\":\"修改Logger的语言\",\"link\":\"/guide/change-logger-language\"},{\"text\":\"不同种类模型的微调经验(例如Qwen,Llama,Gemma等)\",\"link\":\"/guide/fine-tune-model-exp\"},{\"text\":\"节省显存\",\"link\":\"/guide/save-vram\"}]},{\"text\":\"总结\",\"items\":[{\"text\":\"9. 总结\",\"link\":\"/guide/summary\"}]}]}},\"en\":{\"label\":\"English\",\"lang\":\"en-US\",\"title\":\"Qing-Digital-Self\",\"description\":\"Qing's digital avatar with complete setup tutorial\",\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/en/\"},{\"text\":\"Quick Start\",\"link\":\"/en/guide/index\"}],\"sidebar\":[{\"text\":\"Getting Started\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/en/guide/index\"}]},{\"text\":\"Quick Start\",\"items\":[{\"text\":\"1. QQ/TG/Other Data Acquisition\",\"link\":\"/en/guide/prepare-data\"},{\"text\":\"2. Clean Data\",\"link\":\"/en/guide/clean-data\"},{\"text\":\"3. (Optional) Mix Data\",\"link\":\"/en/guide/mix-data\"},{\"text\":\"4. Prepare Model\",\"link\":\"/en/guide/prepare-model\"},{\"text\":\"5. Fine-tune Model\",\"link\":\"/en/guide/fine-tune-model\"},{\"text\":\"6. (Recommended to Skip) Run Full Model After Fine-tuning\",\"link\":\"/en/guide/run-full-model\"},{\"text\":\"7. Convert GGUF and Quantize Model\",\"link\":\"/en/guide/convert-model\"},{\"text\":\"8. Run Model\",\"link\":\"/en/guide/run-model\"}]},{\"text\":\"Extra\",\"items\":[{\"text\":\"Change Logger Language\",\"link\":\"/en/guide/change-logger-language\"},{\"text\":\"Fine-tuning Experience with Different Models (Qwen, Llama, Gemma, etc.)\",\"link\":\"/en/guide/fine-tune-model-exp\"},{\"text\":\"VRAM Optimization\",\"link\":\"/en/guide/save-vram\"}]},{\"text\":\"Summary\",\"items\":[{\"text\":\"9. summary\",\"link\":\"/en/guide/summary\"}]}]}}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>